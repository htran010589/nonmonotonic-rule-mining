\chapter{Background}
\label{chap:back}

In this chapter, we introduce some preliminary knowledge for the rest of the thesis with the following organization. First, nonmonotonic logic and answer set programs are presented. Second, we address some definitions of association rule mining in relational setting such as \textit{head support, absolute support, confidence} and \textit{conviction}. These definitions are exploited to described the main work in Chapter~\ref{chap:frame} and~\ref{chap:system}.

\section{Nonmonotonic Logic Program}

In the current work, typical definitions of logic programs~\cite{ref49} are used in the context of answer set programming. Formally, \textit{nonmonotonic logic program P} is a rule set where each rule has the form:

\begin{equation}
r: H \leftarrow B, not E
\end{equation}
\label{rule3}

In details, $H$ stands for \textit{head(r)} which is a head of the rule $r$, it is also a first-order predicate in the format \textit{a(\textbf{X})}. Besides, $B, not E$ are lists of predicates in conjunctive format: \textit{b$_1$(\textbf{Y}$_1$), b$_2$(\textbf{Y}$_2$), ..., b$_k$(\textbf{Y}$_k$)} and \textit{not b$_{k+1}$(\textbf{Y}$_{k+1}$), b$_{k+2}$(\textbf{Y}$_{k+2}$), ..., b$_n$(\textbf{Y}$_n$)}, resp. $B$ and $not E$ can be used as the short form of $body^+(r)$ and $body^-(r)$, resp. In addition, \textit{negation as failure (NAF), default negation} are other names for the latter. In case $body^-(r) = \emptyset$, then $r$ is a positive Horn rule. \textit{\textbf{X, Y$_{1}$, Y$_{2}$, ..., Y$_{n}$}} are tuples of arguments, i.e., variables and constants where their sizes are the arity of relations \textit{a, b$_1$, b$_2$, ..., b$_n$}, resp. The signature of the program $P$ is denoted as $\Sigma_{P} = \langle$\textbf{P}$, \cC\rangle$ in which \textbf{P}, $\cC$ are sets of relations and constants in $P$, resp.

The logic program $P$ is \textit{ground} if it does not contain any variable, i.e., only constants and predicates appear in each rule $r$. In case $P$ is not ground, $Gr(P)$ is ground instantiation of $P$ which is achieved by replacing variables by constants in all possibilities. The \textit{Herbrand Universe HU(P)} is the set of constants $\cC$ and \textit{Herbrand Base HB(P)} contains any possible ground atoms constructed by predicates, constants in \textbf{P} and $\cC$, resp. Any subset of $HB(P)$ is an \textit{Herbrand Interpretation} of program $P$. An interpretation $I$ is a model for a rule $r$ if for every possible substitutions that $body^+(r), body^-(r)$ hold true, $head(r)$ is also true w.r.t. $I$. $I$ is defined as a model for a program $P$ if it is the model for all rules in $P$. In addition, $MM(P)$ stands for a set-inclusion minimal models for $P$.

An \textit{answer set} $I$ of $P$ is an herbrand interpretation of $P$ and $I \in MM(P^I)$. Here, $P^I$ denotes the Gelfond-Lifschitz (GL) reduct~\cite{ref50} of $P$ which is generated by deleting any rule $r$ s.t. $body^-(r)$ intersects with $I$ and then removing all NAFs in the rest rules. By $AS(P)$ we define the set of answer sets for $P$.

\begin{example}\label{ex:as}
To be specific, let us consider the following nonmonotonic program as an example:\\
{\small \leftline{$P = \left\{
            \renewcommand{\arraystretch}{1.1}
            \begin{array}{@{\,}l@{~~}l@{}}
              \mbox{(1) }\mi{livesIn(brad,berlin)};\;\mbox{(2) }\mi{isMarriedTo(brad,ann)};\\
              \mbox{(3) } \mi{livesIn(Y,Z)\leftarrow isMarriedTo(X,Y),livesIn(X,Z),  \naf\ researcher(Y)}\\
            \end{array}%
            \!\right\}$}}
            
\normalsize
{\smallskip

\noindent            
We can achieve the ground instantiation $Gr(P)$ of $P$ as a result of replacing $X,Y,Z$ with $\mi{brad, \,ann}$ and $\mi{berlin}$ , resp. Consider an interpretation $I=\{${\small\textit{isMarriedTo(brad,ann),livesIn\\(ann,berlin), livesIn(brad,berlin)}}$\}$, based on the above definition, the GL-reduct $P^I$ of $P$ consists of a clause \textit{livesIn(ann,berlin) $\leftarrow$ livesIn(brad,berlin),isMarriedTo(brad,ann)} and the ground terms (1), (2). Since $I$ is a minimal model of $P^I$, by the definition, $I \in AS(P)$.}\qed
\end{example}


\section{Association Rule Mining in Relational Setting}

Association rule mining explores frequent patterns from the data and subsequently cast these patterns to rules. Applying association rules to the relational setting has been attracting research interests of both ILP[cite] and in KG[cite] scientists. In the following description, typical rule measure concepts of association rule mining are adapted to the current work in relational setting.

First of all, to simplify the problem of \textit{language bias}, our research only takes the following positive rule form into consideration:

\begin{equation}
r2: h(X, Z) \leftarrow p(X, Y), q(Y, Z)
\label{form2}
\end{equation}

Where $h$, $p$, $q$ are binary predicates from KG $\cG$, these notations and the form~\ref{form2} ($r2$) are used in the rest of this thesis.

\begin{definition}
\textit{Absolute support} of a rule $r$ w.r.t. a KG $\cG$ is the number of substitutions $(X/a, Y/b, Z/c)$ s.t. $h(a, c), p(a, b)$ and $q(b, c)$ hold true in $\cG$.
\end{definition}

\begin{definition}
The \textit{relative head support} of predicate $h$ w.r.t. $\cG$ can be calculate by the following formula:
\begin{equation}
supp(h(X,Y),\cG)=\dfrac{\#(X,Y):h(X,Y)\in \cG}{(\#X:\exists Y\;h(X,Y)\in \cG)\times(\#Y:\exists X\;h(X,Y)\in \cG)}
\end{equation}
\end{definition}

\begin{definition}
$conf(r,\cG)$ denoteds confidence of rule $r$ w.r.t. $\cG$:
\begin{equation}
conf(r,\cG)=\dfrac{(\#(X, Z):\exists Y\;h(X,Z),p(X,Y),q(Y,Z)\in \cG)}{(\#(X,Z):\exists Y\;p(X,Y),q(Y,Z)\in \cG)}
\end{equation}
\end{definition}

\begin{definition}
The conviction of rule $r$ w.r.t. $\cG$ is defined as:
\begin{equation}
\mi{conv(r, \cG)= \dfrac{1 - supp(h(X,Y), \cG)}{1 - conf(r, \cG)}}
\end{equation}
\end{definition}

\begin{example}
Given a KG $\cG$ in Figure~\ref{fig1.1} and a rule $r1$ in the form~\ref{rule1}, there are three ways to substitute variables in $r1$ based on $\cG$. Thus, the absolute support of $r1$ w.r.t. $\cG$ is $3$. Besides, the \textit{relative head support} of predicates \textit{livesIn} and \textit{hasFriend} are $\mi{supp(livesIn(X,Z)), \cG}{=}\dfrac{9}{8 \times 4}{\approx} 0.3$ and  $\mi{supp(hasFriend(X,Z)), \cG}{=}\dfrac{1}{1 \times 1}{=} 1.0$, resp. The confidence of rule $r1$ is $conf(r1, \cG) {=} \dfrac{2}{5} {=} 0.4$, thus, the conviction measure can be found as $conv(r1, \cG) {=} \dfrac{1-0.3}{1 - 0.4} {=} \dfrac{7}{6} {=} 1.17$
\end{example}